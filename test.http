# JWT Authentication Testing
# Make sure your server is running on http://localhost:3000
# And you have seeded the database with npm run db:seed (just once)

# --- VARIABLES ---
@baseUrl = http://localhost:3000
@adminEmail = {{$dotenv ADMIN_EMAIL}}
@adminPassword = {{$dotenv ADMIN_PASSWORD}}
@employeeEmail = {{$dotenv EMPLOYEE_EMAIL}}
@employeePassword = {{$dotenv EMPLOYEE_PASSWORD}}

# JWT Test Token
# BEWARE: paste a valid token here after login, no quotes
@jwtToken = abCdeF12...

# --- LOGIN ROUTES ---

### 1. Test Login with Admin Credentials
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{adminEmail}}",
  "password": "{{adminPassword}}"
}

### 2. Test Login with Employee Credentials
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{employeeEmail}}",
  "password": "{{employeePassword}}"
}

### 3. Test Login with Invalid Credentials
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{adminEmail}}",
  "password": "wrong.password"
}

# --- ROUTES WITH JWT TOKEN ---

### 4. Test Protected Route (requires authentication)
# NOTE: Paste a valid token from step 1 or 2 in jwtToken variable above ↑
GET {{baseUrl}}/api/protected
Authorization: Bearer {{jwtToken}}

### 5. Test Admin-Only Route (requires admin role)
# NOTE: Paste a valid admin token from step 1 in jwtToken variable above ↑
GET {{baseUrl}}/api/admin-only
Authorization: Bearer {{jwtToken}}

### 6. Test Admin-Only Route with Employee Token (should fail)
# NOTE: Paste a valid employee token from step 2 in jwtToken variable above ↑
GET {{baseUrl}}/api/admin-only
Authorization: Bearer {{jwtToken}}

### 7. Test Protected Route without Token (should fail)
GET {{baseUrl}}/api/protected

### 8. Test Get Current User Info
# Replace YOUR_JWT_TOKEN with any valid token
GET {{baseUrl}}/api/auth/me
Authorization: Bearer {{jwtToken}}

### 9. Test Public Route (no auth required)
GET {{baseUrl}}/
